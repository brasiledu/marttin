{% extends "base.html" %}
{% load static %}

{% block title %}Chat - Marttin AI{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'agent/css/chat.css' %}">
{% endblock %}

{% block content %}
<div class="chat-container" id="chatContainer" data-api-url="{% url 'agent:chat_api' %}">
    {% if not user.is_authenticated %}
    <div class="demo-notice">
        <i class="bi bi-bullseye"></i> Modo Demo - Funcionalidades limitadas. 
        <a href="{% url 'agent:signup' %}">Criar conta gratuita</a> para acesso completo.
    </div>
    {% endif %}

    <div class="chat-messages" id="chatMessages">
        <div class="empty-state" id="emptyState">
            <div class="empty-icon"><i class="bi bi-chat-dots"></i></div>
            <h2 class="empty-title">Como posso ajudar você hoje?</h2>
            <p class="empty-description">
                Faça uma pergunta ou escolha uma das sugestões abaixo para começar nossa conversa.
            </p>
            
            <div class="suggestions" id="suggestions">
                {% if user.is_authenticated %}
                    <div class="suggestion-chip js-suggestion" data-suggestion="Como posso melhorar minha estratégia de marketing?">Estratégia de Marketing</div>
                    <div class="suggestion-chip js-suggestion" data-suggestion="Preciso de ideias para posts nas redes sociais">Ideias para Redes Sociais</div>
                    <div class="suggestion-chip js-suggestion" data-suggestion="Como aumentar vendas do meu negócio?">Aumentar Vendas</div>
                    <div class="suggestion-chip js-suggestion" data-suggestion="Ajude-me com planejamento financeiro">Planejamento Financeiro</div>
                {% else %}
                    <div class="suggestion-chip js-suggestion" data-suggestion="O que é o Marttin AI?">O que é o Marttin?</div>
                    <div class="suggestion-chip js-suggestion" data-suggestion="Quais são os principais recursos?">Recursos Principais</div>
                    <div class="suggestion-chip js-suggestion" data-suggestion="Como funciona para pequenos negócios?">Para Pequenos Negócios</div>
                    <div class="suggestion-chip js-suggestion" data-suggestion="Quais são os planos disponíveis?">Planos e Preços</div>
                {% endif %}
            </div>
        </div>

        <div class="typing-indicator" id="typingIndicator">
            <div class="typing-content-wrapper">
                <div class="message-avatar"><i class="bi bi-cpu"></i></div>
                <div class="typing-content">
                    <div class="typing-dots"></div>
                    <div class="typing-dots"></div>
                    <div class="typing-dots"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="chat-input-area">
        <div class="input-container">
            <textarea 
                class="chat-input" 
                id="messageInput" 
                placeholder="Digite sua mensagem..."
                rows="1"></textarea>
            <button class="send-button" id="sendButton" aria-label="Enviar mensagem">↑</button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'agent/js/chat.js' %}"></script>
{% endblock %}
